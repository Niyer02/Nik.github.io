<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight 214 ‚Äî Now Boarding</title>

    <!-- Open Graph -->
    <meta property="og:title" content="Flight 214 ‚Äî Now Boarding">
    <meta property="og:description" content="You've been cleared for boarding. Valentine's Day 2026.">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#0a1628">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <style>
        /* ==================== RESET & BASE ==================== */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --bg-dark: #0a1628;
            --bg-panel: #132042;
            --gold: #f59e0b;
            --pink: #ec4899;
            --red: #e11d48;
            --green: #22c55e;
            --blue: #3b82f6;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --font-mono: 'Share Tech Mono', monospace;
            --font-body: 'Inter', sans-serif;
            --transition-speed: 0.6s;
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background: var(--bg-dark);
            color: var(--text);
            font-family: var(--font-body);
        }

        /* ==================== SCREEN SYSTEM ==================== */
        .screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: clamp(1rem, 4vw, 2.5rem);
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed) ease, visibility var(--transition-speed) ease;
            z-index: 1;
        }
        .screen.active {
            opacity: 1;
            visibility: visible;
            z-index: 10;
        }

        /* ==================== SHARED COMPONENTS ==================== */
        .btn {
            font-family: var(--font-mono);
            font-size: clamp(0.875rem, 2.5vw, 1.125rem);
            padding: 0.875rem 2.5rem;
            border: 2px solid var(--gold);
            background: transparent;
            color: var(--gold);
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            transition: all 0.3s ease;
            min-height: 48px;
            min-width: 48px;
        }
        .btn:hover {
            background: var(--gold);
            color: var(--bg-dark);
        }
        .btn:active {
            transform: scale(0.97);
        }

        .mono { font-family: var(--font-mono); }
        .label {
            font-family: var(--font-mono);
            font-size: clamp(0.625rem, 1.8vw, 0.75rem);
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        /* ==================== SCREEN 1: WELCOME ==================== */
        #screen-welcome .welcome-wrapper {
            max-width: 760px;
            width: 100%;
            animation: cardEntrance 0.8s ease-out;
        }
        @keyframes cardEntrance {
            from { opacity: 0; transform: translateY(30px) scale(0.96); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .welcome-heading {
            text-align: center;
            margin-bottom: 1.25rem;
        }
        .welcome-heading .overline {
            font-family: var(--font-mono);
            font-size: clamp(0.65rem, 1.8vw, 0.8rem);
            color: var(--text-muted);
            letter-spacing: 0.3em;
            text-transform: uppercase;
        }
        .welcome-heading .title {
            font-family: var(--font-mono);
            font-size: clamp(1.4rem, 4.5vw, 2.2rem);
            color: var(--gold);
            font-weight: 700;
        }

        /* Tear-off mechanics */
        .bp-stub.tearable {
            cursor: grab;
            user-select: none;
            -webkit-user-select: none;
            position: relative;
            z-index: 5;
        }
        .bp-stub.tearable:active {
            cursor: grabbing;
        }
        .bp-stub.torn {
            transition: transform 0.45s ease-in, opacity 0.4s ease-in;
            transform: translateX(120%) rotate(8deg) !important;
            opacity: 0 !important;
            pointer-events: none;
        }
        .bp-stub.snapping {
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }

        /* Tear hint */
        .tear-hint {
            font-family: var(--font-mono);
            font-size: clamp(0.55rem, 1.3vw, 0.65rem);
            color: #999;
            text-align: center;
            margin-top: 0.5rem;
            letter-spacing: 0.08em;
            animation: tearPulse 2s ease-in-out infinite;
        }
        .tear-hint .arrow {
            display: inline-block;
            animation: tearSlide 1.5s ease-in-out infinite;
        }
        @keyframes tearPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        @keyframes tearSlide {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }

        /* Pulsing seam on welcome screen */
        #screen-welcome .bp-seam {
            animation: seamPulse 2s ease-in-out infinite;
        }
        @keyframes seamPulse {
            0%, 100% { border-color: rgba(0,0,0,0.12); }
            50% { border-color: rgba(236, 72, 153, 0.4); }
        }

        /* ==================== SCREEN 2: CHECK-IN ==================== */
        #screen-checkin .checkin-container {
            max-width: 580px;
            width: 100%;
            text-align: center;
        }
        .announcement-box {
            background: var(--bg-panel);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 8px;
            padding: clamp(1rem, 3vw, 1.5rem);
            margin-bottom: 2rem;
            min-height: 3.5em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .announcement-text {
            font-family: var(--font-mono);
            font-size: clamp(0.85rem, 2.5vw, 1.05rem);
            color: var(--gold);
            line-height: 1.6;
        }
        .announcement-text .cursor {
            display: inline-block;
            width: 2px;
            height: 1.1em;
            background: var(--gold);
            margin-left: 2px;
            vertical-align: text-bottom;
            animation: blink 0.7s step-end infinite;
        }
        @keyframes blink {
            50% { opacity: 0; }
        }

        .quiz-section {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .quiz-section.visible { opacity: 1; }

        .quiz-question {
            font-size: clamp(0.95rem, 2.8vw, 1.15rem);
            margin-bottom: 1.25rem;
            color: var(--text);
        }
        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }
        .quiz-option {
            font-family: var(--font-mono);
            font-size: clamp(0.8rem, 2.2vw, 0.95rem);
            padding: 0.875rem 1.25rem;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.03);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            min-height: 48px;
        }
        .quiz-option:hover {
            border-color: var(--gold);
            background: rgba(245, 158, 11, 0.08);
        }
        .quiz-option.correct {
            border-color: var(--green);
            background: rgba(34, 197, 94, 0.15);
            color: var(--green);
        }
        .quiz-option.wrong {
            border-color: var(--red);
            background: rgba(225, 29, 72, 0.15);
            color: var(--red);
            animation: shake 0.5s ease;
        }
        .photo-reveal {
            opacity: 0;
            visibility: hidden;
            max-height: 0;
            transition: opacity 0.6s ease, visibility 0.6s ease, max-height 0.6s ease;
            margin-top: 1.5rem;
            text-align: center;
            overflow: hidden;
        }
        .photo-reveal.visible {
            opacity: 1;
            visibility: visible;
            max-height: 600px;
        }
        .reveal-photo {
            width: 100%;
            max-width: 340px;
            border-radius: 12px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            margin-bottom: 1rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
        }
        .reveal-caption {
            font-family: var(--font-mono);
            font-size: clamp(0.8rem, 2.2vw, 0.95rem);
            color: var(--gold);
            line-height: 1.6;
            margin-bottom: 1.25rem;
            padding: 0 0.5rem;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            15% { transform: translateX(-8px); }
            30% { transform: translateX(8px); }
            45% { transform: translateX(-6px); }
            60% { transform: translateX(6px); }
            75% { transform: translateX(-3px); }
            90% { transform: translateX(3px); }
        }

        /* ==================== SCREEN 3: SECURITY ==================== */
        #screen-security .security-container {
            max-width: 520px;
            width: 100%;
            text-align: center;
        }
        .security-title {
            font-family: var(--font-mono);
            font-size: clamp(1.2rem, 4vw, 1.75rem);
            color: var(--blue);
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 2rem;
        }
        .security-items { display: grid; gap: 1rem; }
        .security-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.25rem;
            background: var(--bg-panel);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .security-item.visible { opacity: 1; }
        .security-item .scan-line {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.15), transparent);
            transition: none;
        }
        .security-item.scanning .scan-line {
            animation: scanSweep 1.5s ease-in-out;
        }
        @keyframes scanSweep {
            from { left: -100%; }
            to { left: 100%; }
        }

        .security-item .item-text {
            flex: 1;
            font-family: var(--font-mono);
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            text-align: left;
        }
        .security-item .item-status {
            font-size: 1.3rem;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .security-item .item-status.show {
            opacity: 1;
        }
        .security-item .item-status.cleared { color: var(--green); }
        .security-item .item-status.failed { color: var(--red); }

        .confiscated-stamp {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-15deg) scale(0);
            font-family: var(--font-mono);
            font-size: clamp(1rem, 3.5vw, 1.4rem);
            color: var(--red);
            border: 3px solid var(--red);
            padding: 0.3rem 1rem;
            letter-spacing: 0.15em;
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
            white-space: nowrap;
        }
        .confiscated-stamp.show {
            transform: translate(-50%, -50%) rotate(-15deg) scale(1);
            opacity: 1;
        }

        /* ==================== SCREEN 4: DEPARTURE BOARD ==================== */
        #screen-departures .departures-container {
            max-width: 680px;
            width: 100%;
            text-align: center;
        }
        .departures-title {
            font-family: var(--font-mono);
            font-size: clamp(1rem, 3.5vw, 1.5rem);
            color: var(--gold);
            letter-spacing: 0.25em;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
        }
        .departures-board {
            background: #0d0d0d;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .departures-header,
        .departures-row {
            display: grid;
            grid-template-columns: 1fr 2fr 0.8fr 1.5fr;
            gap: 0;
        }
        .departures-header {
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .departures-header .cell {
            font-family: var(--font-mono);
            font-size: clamp(0.6rem, 1.8vw, 0.75rem);
            color: var(--text-muted);
            padding: 0.6rem 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            text-align: left;
        }
        .departures-row {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        .departures-row .cell {
            font-family: var(--font-mono);
            font-size: clamp(0.75rem, 2.2vw, 1rem);
            color: var(--text);
            padding: 0.75rem;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
        }
        .departures-row.highlight {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .departures-row.highlight .cell {
            color: var(--gold);
        }
        .status-badge {
            display: inline-block;
            font-size: clamp(0.6rem, 1.8vw, 0.75rem);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            letter-spacing: 0.05em;
        }
        .status-departed { background: rgba(255,255,255,0.08); color: var(--text-muted); }
        .status-ontime { background: rgba(34,197,94,0.15); color: var(--green); }
        .status-delayed { background: rgba(245,158,11,0.15); color: var(--gold); }
        .status-boarding {
            background: rgba(245, 158, 11, 0.2);
            color: var(--gold);
            animation: pulseBadge 1.5s ease-in-out infinite;
        }
        @keyframes pulseBadge {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        #screen-departures .btn {
            margin-top: 2rem;
            opacity: 0;
            transition: opacity 0.5s ease, background 0.3s ease, color 0.3s ease;
        }
        #screen-departures .btn.visible { opacity: 1; }

        /* ==================== SCREEN 5: BOARDING PASS ==================== */
        #screen-boarding .boarding-container {
            max-width: 760px;
            width: 100%;
            text-align: center;
        }

        /* -- The pass itself -- */
        .bp {
            display: flex;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            text-align: left;
            position: relative;
        }

        /* -- Main (left) section -- */
        .bp-main {
            flex: 2;
            background:
                radial-gradient(circle, rgba(255,255,255,0.07) 1px, transparent 1px),
                linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            background-size: 14px 14px, 100% 100%;
            padding: clamp(1.1rem, 3vw, 1.75rem);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
        }

        .bp-main-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .bp-lbl {
            font-family: var(--font-body);
            font-size: clamp(0.6rem, 1.5vw, 0.75rem);
            color: rgba(255,255,255,0.7);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .bp-code {
            font-family: var(--font-mono);
            font-size: clamp(1.8rem, 5.5vw, 3.2rem);
            color: #fff;
            font-weight: 700;
            line-height: 1.1;
        }
        .bp-city {
            font-family: var(--font-body);
            font-size: clamp(0.6rem, 1.6vw, 0.85rem);
            color: #fff;
            font-weight: 600;
            text-transform: uppercase;
        }
        .bp-datetime {
            font-family: var(--font-body);
            font-size: clamp(0.6rem, 1.4vw, 0.78rem);
            color: rgba(255,255,255,0.8);
            margin-top: 0.35rem;
            line-height: 1.4;
        }

        .bp-plane-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            gap: 0.2rem;
            flex-shrink: 0;
        }
        .bp-plane-icon {
            width: clamp(32px, 7vw, 56px);
            height: clamp(32px, 7vw, 56px);
            fill: rgba(255,255,255,0.85);
            transform: rotate(45deg);
        }
        .bp-arrow {
            color: rgba(0,0,0,0.35);
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            line-height: 1;
        }

        .bp-main-bottom {
            display: flex;
            gap: clamp(0.6rem, 2.5vw, 1.5rem);
            flex-wrap: wrap;
            margin-top: 1.25rem;
            padding-top: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
        .bp-field-lbl {
            font-family: var(--font-body);
            font-size: clamp(0.5rem, 1.2vw, 0.65rem);
            color: rgba(255,255,255,0.6);
            text-transform: capitalize;
        }
        .bp-field-val {
            font-family: var(--font-mono);
            font-size: clamp(0.7rem, 2vw, 0.95rem);
            color: #fff;
            font-weight: 700;
        }

        /* -- Divider seam with cutouts -- */
        .bp-seam {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 35%;
            width: 0;
            border-right: 2px dashed rgba(0,0,0,0.12);
            z-index: 3;
        }
        .bp-cutout {
            position: absolute;
            width: 24px;
            height: 24px;
            background: var(--bg-dark);
            border-radius: 50%;
            z-index: 4;
            /* Horizontally centered on the seam */
            right: calc(35% - 12px);
        }
        .bp-cutout-top { top: -12px; }
        .bp-cutout-bottom { bottom: -12px; }

        /* -- Stub (right) section -- */
        .bp-stub {
            flex: 1;
            background: #f1f0eb;
            padding: clamp(0.8rem, 2.5vw, 1.5rem);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        /* Watermark plane on stub */
        .bp-stub::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            right: -20px;
            top: 50%;
            transform: translateY(-50%) rotate(45deg);
            opacity: 0.06;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z'/%3E%3C/svg%3E") no-repeat center/contain;
            pointer-events: none;
        }

        .bp-stub-title {
            font-family: var(--font-mono);
            font-size: clamp(0.65rem, 1.8vw, 0.85rem);
            color: #111;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 0.75rem;
            text-align: center;
        }
        .bp-stub-route {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.3rem 0.5rem;
            margin-bottom: 0.5rem;
        }
        .bp-stub .bp-s-lbl {
            font-family: var(--font-body);
            font-size: clamp(0.5rem, 1.2vw, 0.6rem);
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
        }
        .bp-stub .bp-s-code {
            font-family: var(--font-mono);
            font-size: clamp(1rem, 3vw, 1.5rem);
            color: var(--pink);
            font-weight: 700;
            line-height: 1.1;
        }
        .bp-stub .bp-s-city {
            font-family: var(--font-body);
            font-size: clamp(0.45rem, 1.1vw, 0.58rem);
            color: var(--pink);
            font-weight: 700;
            text-transform: uppercase;
        }
        .bp-stub .bp-s-date {
            font-family: var(--font-body);
            font-size: clamp(0.45rem, 1vw, 0.55rem);
            color: #555;
            margin-top: 0.15rem;
            line-height: 1.3;
        }
        .bp-stub-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.25rem 0.5rem;
            margin-top: 0.4rem;
            padding-top: 0.4rem;
            border-top: 1px solid #ddd;
        }
        .bp-stub-details .bp-sd-lbl {
            font-family: var(--font-body);
            font-size: clamp(0.45rem, 1vw, 0.55rem);
            color: #888;
        }
        .bp-stub-details .bp-sd-val {
            font-family: var(--font-mono);
            font-size: clamp(0.6rem, 1.5vw, 0.78rem);
            color: var(--pink);
            font-weight: 700;
        }
        .bp-stub-row3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 0.25rem;
            margin-top: 0.25rem;
        }

        .bp-barcode {
            height: clamp(36px, 6vw, 50px);
            margin-top: auto;
            padding-top: 0.6rem;
            background: repeating-linear-gradient(
                90deg,
                #111 0px, #111 2px,
                transparent 2px, transparent 4.5px,
                #111 4.5px, #111 5.5px,
                transparent 5.5px, transparent 7px,
                #111 7px, #111 8px,
                transparent 8px, transparent 10.5px,
                #111 10.5px, #111 13px,
                transparent 13px, transparent 14.5px,
                #111 14.5px, #111 15.5px,
                transparent 15.5px, transparent 18px
            );
            background-size: 18px 100%;
            background-position: center;
            border-radius: 2px;
            opacity: 0.85;
        }

        /* -- Question + buttons below pass -- */
        .valentine-question {
            font-family: var(--font-mono);
            font-size: clamp(1.1rem, 3.5vw, 1.6rem);
            color: var(--pink);
            margin: 1.75rem 0 1.25rem;
            line-height: 1.4;
        }
        .answer-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn-yes {
            font-family: var(--font-mono);
            font-size: clamp(1rem, 3vw, 1.25rem);
            padding: 1rem 3rem;
            border: 2px solid var(--pink);
            background: var(--pink);
            color: #fff;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 700;
            min-height: 54px;
        }
        .btn-yes:hover {
            background: #db2777;
            border-color: #db2777;
            transform: scale(1.05);
        }
        .btn-no {
            font-family: var(--font-mono);
            font-size: clamp(0.8rem, 2.2vw, 0.95rem);
            padding: 0.75rem 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border-radius: 8px;
            transition: transform 0.15s ease;
            min-height: 48px;
        }

        /* -- Boarding pass responsive -- */
        @media (max-width: 540px) {
            .bp { flex-direction: column; }
            .bp-seam {
                top: auto;
                bottom: auto;
                left: 0;
                right: 0;
                width: auto;
                height: 0;
                border-right: none;
                border-bottom: 2px dashed rgba(0,0,0,0.12);
                /* position it between main and stub */
                position: relative;
            }
            .bp-cutout {
                right: auto;
                top: auto;
                bottom: auto;
            }
            .bp-cutout-top {
                position: absolute;
                left: -12px;
                top: auto;
                bottom: auto;
                /* re-positioned by parent flow */
            }
            .bp-cutout-bottom {
                position: absolute;
                right: -12px;
                top: auto;
                bottom: auto;
            }
            .bp-stub-route {
                gap: 0.3rem 1rem;
            }
            .bp-stub-row3 {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        /* ==================== SCREEN 6: YES CELEBRATION ==================== */
        #screen-yes .celebration-container {
            text-align: center;
            z-index: 20;
        }
        .celebration-emoji {
            font-size: clamp(3rem, 10vw, 5rem);
            animation: celebrationBounce 0.6s ease infinite alternate;
        }
        @keyframes celebrationBounce {
            from { transform: translateY(0); }
            to { transform: translateY(-15px); }
        }
        .celebration-title {
            font-family: var(--font-mono);
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            color: var(--pink);
            margin: 1rem 0 0.5rem;
        }
        .celebration-subtitle {
            font-size: clamp(0.9rem, 2.5vw, 1.15rem);
            color: var(--text-muted);
            margin-bottom: 1.5rem;
        }
        .pets-section {
            display: flex;
            justify-content: center;
            gap: clamp(1rem, 4vw, 2rem);
            margin-top: 1.25rem;
        }
        .pet-photo {
            width: clamp(80px, 20vw, 130px);
            border-radius: 50%;
            animation: celebrationBounce 0.6s ease infinite alternate;
        }
        .pet-photo-delay {
            animation-delay: 0.2s;
        }
        .pets-text {
            font-family: var(--font-mono);
            font-size: clamp(0.85rem, 2.5vw, 1.05rem);
            color: var(--gold);
            margin-top: 0.75rem;
            letter-spacing: 0.1em;
        }

        /* Confetti canvas */
        #confetti-canvas {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 15;
            pointer-events: none;
        }

        /* ==================== SCREEN 7: NO / GLITCH ==================== */
        #screen-no .glitch-container {
            text-align: center;
        }
        .glitch-text {
            font-family: var(--font-mono);
            font-size: clamp(1.3rem, 4.5vw, 2rem);
            color: var(--red);
            animation: glitchShake 0.15s linear infinite;
            letter-spacing: 0.1em;
        }
        @keyframes glitchShake {
            0% { transform: translate(0, 0) skewX(0deg); }
            20% { transform: translate(-3px, 1px) skewX(-0.5deg); }
            40% { transform: translate(2px, -1px) skewX(0.5deg); }
            60% { transform: translate(-1px, 2px) skewX(-0.3deg); }
            80% { transform: translate(3px, -2px) skewX(0.3deg); }
            100% { transform: translate(0, 0) skewX(0deg); }
        }
        .glitch-emoji {
            font-size: clamp(2.5rem, 8vw, 4rem);
            margin-bottom: 1rem;
        }
        .glitch-subtext {
            font-family: var(--font-mono);
            font-size: clamp(0.75rem, 2vw, 0.9rem);
            color: var(--text-muted);
            margin-top: 1rem;
            letter-spacing: 0.05em;
        }
        .glitch-redirect {
            font-family: var(--font-mono);
            font-size: clamp(0.65rem, 1.5vw, 0.8rem);
            color: var(--text-muted);
            margin-top: 1.5rem;
            opacity: 0.6;
        }

        /* CRT scanline overlay for glitch screen */
        #screen-no::after {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.15) 2px,
                rgba(0, 0, 0, 0.15) 4px
            );
            pointer-events: none;
            z-index: 2;
        }
        #screen-no.active {
            animation: crtFlicker 0.1s linear infinite;
        }
        @keyframes crtFlicker {
            0% { filter: brightness(1) hue-rotate(0deg); }
            30% { filter: brightness(1.02) hue-rotate(2deg); }
            60% { filter: brightness(0.98) hue-rotate(-1deg); }
            100% { filter: brightness(1) hue-rotate(0deg); }
        }

        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 480px) {
            .departures-header .cell,
            .departures-row .cell {
                padding: 0.5rem 0.4rem;
                font-size: clamp(0.6rem, 2.8vw, 0.8rem);
            }
            .departures-header,
            .departures-row {
                grid-template-columns: 1fr 1.6fr 0.6fr 1.2fr;
            }
            .answer-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn-yes, .btn-no {
                width: 100%;
                max-width: 280px;
            }
        }
    </style>
</head>
<body>

    <!-- ==================== SCREEN 1: WELCOME ==================== -->
    <div id="screen-welcome" class="screen active">
        <div class="welcome-wrapper">
            <div class="welcome-heading">
                <div class="overline">Now Boarding</div>
                <div class="title">Flight 214 ‚Äî Valentine's Day 2026</div>
            </div>
            <div class="bp" id="welcome-bp">
                <div class="bp-cutout bp-cutout-top"></div>
                <div class="bp-cutout bp-cutout-bottom"></div>
                <div class="bp-seam"></div>

                <div class="bp-main">
                    <div class="bp-main-top">
                        <div class="bp-endpoint">
                            <div class="bp-lbl">From:</div>
                            <div class="bp-code">SGL</div>
                            <div class="bp-city">Single Life</div>
                            <div class="bp-datetime">Feb 14, 2026<br>Departure</div>
                        </div>
                        <div class="bp-plane-area">
                            <svg class="bp-plane-icon" viewBox="0 0 24 24"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg>
                            <div class="bp-arrow">&#10132;</div>
                        </div>
                        <div class="bp-endpoint" style="text-align:right">
                            <div class="bp-lbl">To:</div>
                            <div class="bp-code">VLD</div>
                            <div class="bp-city">Valentine's Day</div>
                            <div class="bp-datetime">Feb 14, 2026<br>Forever</div>
                        </div>
                    </div>
                    <div class="bp-main-bottom">
                        <div class="bp-field">
                            <div class="bp-field-lbl">Passenger</div>
                            <div class="bp-field-val">KAT</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Flight</div>
                            <div class="bp-field-val">FL 214</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Seat</div>
                            <div class="bp-field-val">NIK+KAT</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Gate</div>
                            <div class="bp-field-val">14</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Terminal</div>
                            <div class="bp-field-val">LOVE</div>
                        </div>
                    </div>
                </div>

                <div class="bp-stub tearable" id="welcome-stub">
                    <div class="bp-stub-title">Boarding Pass</div>
                    <div class="bp-stub-route">
                        <div>
                            <div class="bp-s-lbl">From:</div>
                            <div class="bp-s-code">SGL</div>
                            <div class="bp-s-city">Single Life</div>
                            <div class="bp-s-date">Feb 14, 2026<br>Departure</div>
                        </div>
                        <div>
                            <div class="bp-s-lbl">To:</div>
                            <div class="bp-s-code">VLD</div>
                            <div class="bp-s-city">Valentine's</div>
                            <div class="bp-s-date">Feb 14, 2026<br>Forever</div>
                        </div>
                    </div>
                    <div class="bp-stub-details">
                        <div>
                            <div class="bp-sd-lbl">Passenger</div>
                            <div class="bp-sd-val">KAT</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Flight</div>
                            <div class="bp-sd-val">FL 214</div>
                        </div>
                    </div>
                    <div class="bp-stub-row3">
                        <div>
                            <div class="bp-sd-lbl">Seat</div>
                            <div class="bp-sd-val">NIK+KAT</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Gate</div>
                            <div class="bp-sd-val">14</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Terminal</div>
                            <div class="bp-sd-val">LOVE</div>
                        </div>
                    </div>
                    <div class="bp-barcode"></div>
                    <div class="tear-hint">Tear to board <span class="arrow">‚Üí</span></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SCREEN 2: CHECK-IN ==================== -->
    <div id="screen-checkin" class="screen">
        <div class="checkin-container">
            <div class="announcement-box">
                <div class="announcement-text">
                    <span id="typed-text"></span><span class="cursor"></span>
                </div>
            </div>
            <div class="quiz-section" id="quiz-section">
                <div class="quiz-question">Where was our FIRST VACATION EVER?</div>
                <div class="quiz-options">
                    <button class="quiz-option" onclick="handleQuizAnswer(this, true)">Costa Rica</button>
                    <button class="quiz-option" onclick="handleQuizAnswer(this, false)">New York</button>
                    <button class="quiz-option" onclick="handleQuizAnswer(this, false)">India</button>
                    <button class="quiz-option" onclick="handleQuizAnswer(this, false)">Italy</button>
                </div>
            </div>
            <div class="photo-reveal" id="photo-reveal">
                <img src="211e21eb-63ff-4ed3-8ded-5521243b9701.jfif" alt="Nik and Kat in Costa Rica" class="reveal-photo">
                <div class="reveal-caption">Nik's favourite trip on record. Boarding pass stamped, heart claimed, no refunds.</div>
                <button class="btn" onclick="goToScreen('screen-security')">Continue to Security</button>
            </div>
        </div>
    </div>

    <!-- ==================== SCREEN 3: SECURITY ==================== -->
    <div id="screen-security" class="screen">
        <div class="security-container">
            <div class="security-title">Security Screening</div>
            <div class="security-items">
                <div class="security-item" data-result="cleared">
                    <div class="scan-line"></div>
                    <span class="item-text">Love for adventure</span>
                    <span class="item-status">‚úì</span>
                </div>
                <div class="security-item" data-result="cleared">
                    <div class="scan-line"></div>
                    <span class="item-text">Matching sense of humor</span>
                    <span class="item-status">‚úì</span>
                </div>
                <div class="security-item" data-result="cleared">
                    <div class="scan-line"></div>
                    <span class="item-text">Unconditional support</span>
                    <span class="item-status">‚úì</span>
                </div>
                <div class="security-item" data-result="failed">
                    <div class="scan-line"></div>
                    <span class="item-text">Plans without Nik</span>
                    <span class="item-status">‚úó</span>
                    <div class="confiscated-stamp">CONFISCATED</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SCREEN 4: DEPARTURE BOARD ==================== -->
    <div id="screen-departures" class="screen">
        <div class="departures-container">
            <div class="departures-title">Departures</div>
            <div class="departures-board">
                <div class="departures-header">
                    <div class="cell">Flight</div>
                    <div class="cell">Destination</div>
                    <div class="cell">Gate</div>
                    <div class="cell">Status</div>
                </div>
                <div class="departures-row" data-row="0">
                    <div class="cell" data-final="FL 001"></div>
                    <div class="cell" data-final="FRIENDZONE"></div>
                    <div class="cell" data-final="C3"></div>
                    <div class="cell"><span class="status-badge status-departed" data-final="DEPARTED"></span></div>
                </div>
                <div class="departures-row" data-row="1">
                    <div class="cell" data-final="FL 102"></div>
                    <div class="cell" data-final="ADVENTURE"></div>
                    <div class="cell" data-final="B7"></div>
                    <div class="cell"><span class="status-badge status-ontime" data-final="ON TIME"></span></div>
                </div>
                <div class="departures-row" data-row="2">
                    <div class="cell" data-final="FL 307"></div>
                    <div class="cell" data-final="FOREVER"></div>
                    <div class="cell" data-final="A1"></div>
                    <div class="cell"><span class="status-badge status-delayed" data-final="DELAYED"></span></div>
                </div>
                <div class="departures-row highlight" data-row="3">
                    <div class="cell" data-final="FL 214"></div>
                    <div class="cell" data-final="VALENTINE'S"></div>
                    <div class="cell" data-final="14"></div>
                    <div class="cell"><span class="status-badge status-boarding" data-final="NOW BOARDING"></span></div>
                </div>
            </div>
            <button class="btn" id="btn-gate" onclick="goToScreen('screen-boarding')">Proceed to Gate 14</button>
        </div>
    </div>

    <!-- ==================== SCREEN 5: BOARDING PASS / QUESTION ==================== -->
    <div id="screen-boarding" class="screen">
        <div class="boarding-container">
            <div class="bp">
                <!-- Cutout circles at the seam -->
                <div class="bp-cutout bp-cutout-top"></div>
                <div class="bp-cutout bp-cutout-bottom"></div>
                <div class="bp-seam"></div>

                <!-- Main (left) section -->
                <div class="bp-main">
                    <div class="bp-main-top">
                        <div class="bp-endpoint">
                            <div class="bp-lbl">From:</div>
                            <div class="bp-code">SGL</div>
                            <div class="bp-city">Single Life</div>
                            <div class="bp-datetime">Feb 14, 2026<br>Departure</div>
                        </div>
                        <div class="bp-plane-area">
                            <svg class="bp-plane-icon" viewBox="0 0 24 24"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg>
                            <div class="bp-arrow">&#10132;</div>
                        </div>
                        <div class="bp-endpoint" style="text-align:right">
                            <div class="bp-lbl">To:</div>
                            <div class="bp-code">VLD</div>
                            <div class="bp-city">Valentine's Day</div>
                            <div class="bp-datetime">Feb 14, 2026<br>Forever</div>
                        </div>
                    </div>
                    <div class="bp-main-bottom">
                        <div class="bp-field">
                            <div class="bp-field-lbl">Passenger</div>
                            <div class="bp-field-val">KAT</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Flight</div>
                            <div class="bp-field-val">FL 214</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Seat</div>
                            <div class="bp-field-val">NIK+KAT</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Gate</div>
                            <div class="bp-field-val">14</div>
                        </div>
                        <div class="bp-field">
                            <div class="bp-field-lbl">Terminal</div>
                            <div class="bp-field-val">LOVE</div>
                        </div>
                    </div>
                </div>

                <!-- Stub (right) section -->
                <div class="bp-stub">
                    <div class="bp-stub-title">Boarding Pass</div>
                    <div class="bp-stub-route">
                        <div>
                            <div class="bp-s-lbl">From:</div>
                            <div class="bp-s-code">SGL</div>
                            <div class="bp-s-city">Single Life</div>
                            <div class="bp-s-date">Feb 14, 2026<br>Departure</div>
                        </div>
                        <div>
                            <div class="bp-s-lbl">To:</div>
                            <div class="bp-s-code">VLD</div>
                            <div class="bp-s-city">Valentine's</div>
                            <div class="bp-s-date">Feb 14, 2026<br>Forever</div>
                        </div>
                    </div>
                    <div class="bp-stub-details">
                        <div>
                            <div class="bp-sd-lbl">Passenger</div>
                            <div class="bp-sd-val">KAT</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Flight</div>
                            <div class="bp-sd-val">FL 214</div>
                        </div>
                    </div>
                    <div class="bp-stub-row3">
                        <div>
                            <div class="bp-sd-lbl">Seat</div>
                            <div class="bp-sd-val">NIK+KAT</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Gate</div>
                            <div class="bp-sd-val">14</div>
                        </div>
                        <div>
                            <div class="bp-sd-lbl">Terminal</div>
                            <div class="bp-sd-val">LOVE</div>
                        </div>
                    </div>
                    <div class="bp-barcode"></div>
                </div>
            </div>

            <div class="valentine-question">Will you be my Valentine?</div>
            <div class="answer-buttons">
                <button class="btn-yes" onclick="handleYes()">YES</button>
                <button class="btn-no" id="btn-no" onclick="handleNo()">NO</button>
            </div>
        </div>
    </div>

    <!-- ==================== SCREEN 6: YES CELEBRATION ==================== -->
    <div id="screen-yes" class="screen">
        <div class="celebration-container">
            <div class="celebration-emoji">üíñ</div>
            <div class="celebration-title">Welcome Aboard, Valentine!</div>
            <div class="celebration-subtitle">Flight 214 is now departing. Final destination: forever.</div>
            <div class="pets-section">
                <div class="pet">
                    <img src="7fc83496-7eeb-42a7-9aef-58d59279021f-removebg-preview.png" alt="Echo" class="pet-photo">
                </div>
                <div class="pet">
                    <img src="3e43d530-f327-405a-9d81-849037cbc42c-removebg-preview.png" alt="Luna" class="pet-photo pet-photo-delay">
                </div>
            </div>
            <div class="pets-text">Luna and Echo approve! üêæ</div>
        </div>
    </div>

    <!-- ==================== SCREEN 7: NO / GLITCH ==================== -->
    <div id="screen-no" class="screen">
        <div class="glitch-container">
            <div class="glitch-emoji">üê∂</div>
            <div class="glitch-text">SYSTEM ERROR</div>
            <div class="glitch-subtext">Invalid response detected. Echo is not happy.</div>
            <div class="glitch-redirect">Redirecting to correct answer...</div>
        </div>
    </div>

    <!-- Confetti -->
    <canvas id="confetti-canvas"></canvas>

    <script>
        /* ==================== STATE ==================== */
        let currentScreen = 'screen-welcome';
        let audioCtx = null;

        /* ==================== TEAR-OFF MECHANIC ==================== */
        (function initTear() {
            const stub = document.getElementById('welcome-stub');
            if (!stub) return;

            let dragging = false;
            let startX = 0;
            let dx = 0;
            const TEAR_THRESHOLD = 80;

            function getX(e) {
                return e.touches ? e.touches[0].clientX : e.clientX;
            }

            function onStart(e) {
                dragging = true;
                startX = getX(e);
                dx = 0;
                stub.classList.remove('snapping');
                stub.style.transition = 'none';
            }

            function onMove(e) {
                if (!dragging) return;
                e.preventDefault();
                dx = Math.max(0, getX(e) - startX);
                const rotate = dx * 0.04;
                const opacity = Math.max(0, 1 - dx / 250);
                stub.style.transform = `translateX(${dx}px) rotate(${rotate}deg)`;
                stub.style.opacity = opacity;
            }

            function onEnd() {
                if (!dragging) return;
                dragging = false;

                if (dx >= TEAR_THRESHOLD) {
                    // Torn off!
                    stub.classList.add('torn');
                    stub.style.transform = '';
                    stub.style.opacity = '';
                    setTimeout(() => goToScreen('screen-checkin'), 500);
                } else {
                    // Snap back
                    stub.classList.add('snapping');
                    stub.style.transform = 'translateX(0) rotate(0deg)';
                    stub.style.opacity = '1';
                }
                dx = 0;
            }

            stub.addEventListener('mousedown', onStart);
            stub.addEventListener('touchstart', onStart, { passive: true });
            document.addEventListener('mousemove', onMove);
            document.addEventListener('touchmove', onMove, { passive: false });
            document.addEventListener('mouseup', onEnd);
            document.addEventListener('touchend', onEnd);
        })();

        /* ==================== SCREEN NAVIGATION ==================== */
        function goToScreen(targetId) {
            const current = document.getElementById(currentScreen);
            const target = document.getElementById(targetId);
            if (!current || !target || currentScreen === targetId) return;

            current.classList.remove('active');
            target.classList.add('active');
            currentScreen = targetId;

            // Trigger screen-specific init
            if (targetId === 'screen-checkin') startTyping();
            if (targetId === 'screen-security') startSecurityScan();
            if (targetId === 'screen-departures') startDepartureBoard();

            playChime();
        }

        /* ==================== AIRPORT CHIME (Web Audio) ==================== */
        function playChime() {
            try {
                if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const now = audioCtx.currentTime;

                const osc1 = audioCtx.createOscillator();
                const gain1 = audioCtx.createGain();
                osc1.type = 'sine';
                osc1.frequency.value = 830;
                gain1.gain.setValueAtTime(0.15, now);
                gain1.gain.exponentialRampToValueAtTime(0.001, now + 0.7);
                osc1.connect(gain1).connect(audioCtx.destination);
                osc1.start(now);
                osc1.stop(now + 0.7);

                const osc2 = audioCtx.createOscillator();
                const gain2 = audioCtx.createGain();
                osc2.type = 'sine';
                osc2.frequency.value = 622;
                gain2.gain.setValueAtTime(0.15, now + 0.35);
                gain2.gain.exponentialRampToValueAtTime(0.001, now + 1.05);
                osc2.connect(gain2).connect(audioCtx.destination);
                osc2.start(now + 0.35);
                osc2.stop(now + 1.05);
            } catch (e) {
                // Audio not supported or blocked; fail silently
            }
        }

        /* ==================== SCREEN 2: TYPING + QUIZ ==================== */
        const announcementText = "Attention passenger Kat. Please verify your identity at the check-in counter.";
        let typingStarted = false;

        function startTyping() {
            if (typingStarted) return;
            typingStarted = true;

            const el = document.getElementById('typed-text');
            let i = 0;
            const interval = setInterval(() => {
                if (i < announcementText.length) {
                    el.textContent += announcementText[i];
                    i++;
                } else {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('quiz-section').classList.add('visible');
                    }, 400);
                }
            }, 35);
        }

        let quizAnswered = false;
        function handleQuizAnswer(btn, isCorrect) {
            if (quizAnswered) return;

            if (isCorrect) {
                quizAnswered = true;
                btn.classList.add('correct');
                document.querySelectorAll('.quiz-option').forEach(o => o.style.pointerEvents = 'none');
                setTimeout(() => {
                    document.getElementById('quiz-section').style.display = 'none';
                    document.getElementById('photo-reveal').classList.add('visible');
                }, 800);
            } else {
                btn.classList.add('wrong');
                btn.style.pointerEvents = 'none';
                setTimeout(() => {
                    btn.classList.remove('wrong');
                }, 600);
            }
        }

        /* ==================== SCREEN 3: SECURITY SCAN ==================== */
        let securityStarted = false;

        function startSecurityScan() {
            if (securityStarted) return;
            securityStarted = true;

            const items = document.querySelectorAll('.security-item');
            items.forEach((item, index) => {
                const delay = index * 2200;

                setTimeout(() => {
                    item.classList.add('visible');
                    item.classList.add('scanning');
                }, delay);

                setTimeout(() => {
                    const status = item.querySelector('.item-status');
                    const result = item.dataset.result;
                    status.classList.add('show');

                    if (result === 'cleared') {
                        status.classList.add('cleared');
                    } else {
                        status.classList.add('failed');
                        const stamp = item.querySelector('.confiscated-stamp');
                        setTimeout(() => stamp.classList.add('show'), 200);
                    }
                }, delay + 1600);
            });

            // Auto-proceed after all items scanned
            const totalTime = items.length * 2200 + 1200;
            setTimeout(() => goToScreen('screen-departures'), totalTime);
        }

        /* ==================== SCREEN 4: DEPARTURE BOARD ==================== */
        let boardStarted = false;
        const flipChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';

        function startDepartureBoard() {
            if (boardStarted) return;
            boardStarted = true;

            const rows = document.querySelectorAll('.departures-row');
            const allCells = [];

            rows.forEach((row, rowIdx) => {
                const cells = row.querySelectorAll('.cell');
                cells.forEach((cell, cellIdx) => {
                    const finalText = cell.dataset.final || cell.querySelector('[data-final]')?.dataset.final;
                    if (!finalText) return;

                    const target = cell.dataset.final ? cell : cell.querySelector('[data-final]');
                    allCells.push({ target, finalText, rowIdx, cellIdx });
                });
            });

            allCells.forEach(({ target, finalText, rowIdx, cellIdx }) => {
                const settleDelay = (rowIdx * 4 + cellIdx) * 180 + 400;
                let cycleCount = 0;
                const maxCycles = Math.floor(settleDelay / 50);

                const interval = setInterval(() => {
                    if (cycleCount >= maxCycles) {
                        clearInterval(interval);
                        target.textContent = finalText;
                        return;
                    }
                    let randomStr = '';
                    for (let i = 0; i < finalText.length; i++) {
                        randomStr += flipChars[Math.floor(Math.random() * flipChars.length)];
                    }
                    target.textContent = randomStr;
                    cycleCount++;
                }, 50);
            });

            // Show button after board settles
            const totalSettleTime = allCells.length * 180 + 800;
            setTimeout(() => {
                document.getElementById('btn-gate').classList.add('visible');
            }, totalSettleTime);
        }

        /* ==================== SCREEN 5: NO BUTTON DODGE ==================== */
        const noBtn = document.getElementById('btn-no');
        const canHover = window.matchMedia('(hover: hover)').matches;

        if (canHover && noBtn) {
            noBtn.addEventListener('mouseover', () => {
                const x = (Math.random() - 0.5) * 260;
                const y = (Math.random() - 0.5) * 160;
                noBtn.style.transform = `translate(${x}px, ${y}px)`;
            });
        }

        /* ==================== SCREEN 6: YES / CONFETTI ==================== */
        function handleYes() {
            goToScreen('screen-yes');
            launchConfetti();
            setTimeout(launchConfetti, 500);
        }

        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let confettiRunning = false;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const confettiColors = ['#f59e0b', '#ec4899', '#e11d48', '#22c55e', '#3b82f6', '#ffffff', '#a855f7'];

        function launchConfetti() {
            for (let i = 0; i < 80; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: -10 - Math.random() * 50,
                    vx: (Math.random() - 0.5) * 8,
                    vy: Math.random() * 3 + 2,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 12,
                    color: confettiColors[Math.floor(Math.random() * confettiColors.length)],
                    width: Math.random() * 10 + 5,
                    height: Math.random() * 6 + 3,
                    opacity: 1
                });
            }

            if (!confettiRunning) {
                confettiRunning = true;
                animateConfetti();
            }
        }

        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.12;
                p.vx *= 0.99;
                p.rotation += p.rotationSpeed;
                p.opacity -= 0.004;

                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate((p.rotation * Math.PI) / 180);
                ctx.globalAlpha = Math.max(p.opacity, 0);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.width / 2, -p.height / 2, p.width, p.height);
                ctx.restore();
            });

            particles = particles.filter(p => p.opacity > 0 && p.y < canvas.height + 50);

            if (particles.length > 0) {
                requestAnimationFrame(animateConfetti);
            } else {
                confettiRunning = false;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }

        /* ==================== SCREEN 7: NO / GLITCH REDIRECT ==================== */
        function handleNo() {
            goToScreen('screen-no');
            setTimeout(() => {
                goToScreen('screen-boarding');
            }, 2500);
        }
    </script>
</body>
</html>
